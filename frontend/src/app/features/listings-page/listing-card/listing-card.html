<a [routerLink]="['/listings', listing?.id]" class="broker-card-link">
  <div class="broker-listing-card">

    <!-- Property Image Section -->
    <div class="broker-image-wrapper">
      <img [src]="imageSrc" class="broker-property-image" [alt]="listing?.title" />

      <!-- Image Overlay -->
      <div class="broker-image-overlay"></div>

      <!-- Property Badge -->
      <div class="broker-property-badge">
        <i class="bi bi-house"></i>
        <span>{{ 'listings.property' | translate }}</span>
      </div>

      <!-- Rating Badge -->
      <div class="broker-rating-badge" *ngIf="rating > 0">
        <i class="bi bi-star-fill"></i>
        <span>{{ rating.toFixed(1) }}</span>
      </div>

      <!-- Favorite Button (uses shared FavoriteButton component) -->
      <app-favorite-button
        class="broker-favorite-btn"
        [listingId]="listing.id"
        [isFavorited]="isFavorited"
        (favoriteChanged)="onFavoriteChanged($event)">
      </app-favorite-button>
    </div>

    <!-- Property Details Section -->
    <div class="broker-card-content">
      <!-- Property Title -->
      <h5 class="broker-property-title">{{ listing?.title || 'Untitled Property' }}</h5>

      <!-- Location -->
      <div class="broker-location-info">
        <i class="bi bi-geo-alt"></i>
        <span>{{ listing?.destination || 'Location not specified' }}</span>
      </div>

      <!-- Property Features -->
      <div class="broker-features-row">
        <div class="broker-feature-item">
          <i class="bi bi-house-door"></i>
          <span>{{ listing?.type || 'Property' }}</span>
        </div>
        <div class="broker-feature-item">
          <i class="bi bi-bed"></i>
          <span>{{ listing?.bedrooms || 0 }} {{ 'listings.beds' | translate }}</span>
        </div>
        <div class="broker-feature-item">
          <i class="bi bi-droplet"></i>
          <span>{{ listing?.bathrooms || 0 }} {{ 'listings.baths' | translate }}</span>
        </div>
      </div>

      <!-- Description -->
      <p class="broker-property-description">{{ shortDescription }}</p>

      <!-- Price and Action Section -->
      <div class="broker-price-section">
        <div class="broker-price-info">
          <span class="broker-price-amount">{{ price }} {{ 'listings.egp' | translate }}</span>
          <span class="broker-price-period">/ {{ 'listings.night' | translate }}</span>
        </div>

        <div class="broker-view-btn">
          <i class="bi bi-arrow-right-circle-fill"></i>
        </div>
      </div>
    </div>

  </div>
</a>
