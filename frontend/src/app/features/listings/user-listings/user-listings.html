<div class="user-listings-container">
  <div class="header">
    <h2>My Listings</h2>
    <button class="btn btn-primary" (click)="createListing()">+ Create New Listing</button>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Loading your listings...</p>
  </div>

  <div *ngIf="error && !loading" class="alert alert-error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && listings.length === 0" class="empty-state">
    <p>You haven't created any listings yet.</p>
    <button class="btn btn-primary" (click)="createListing()">Create Your First Listing</button>
  </div>

  <div *ngIf="!loading && !error && listings.length > 0">
    <div class="listings-grid">
      <div *ngFor="let listing of listings" class="listing-card" (click)="viewListing(listing.id)">
        <div class="card-image">
          <img [src]="listing.mainImageUrl || 'https://via.placeholder.com/300x200'" [alt]="listing.title" />
        </div>
        
        <div class="card-content">
          <h3>{{ listing.title }}</h3>
          <p class="location">üìç {{ listing.location }}</p>
          
          <div class="card-footer">
            <span class="price">{{ listing.pricePerNight }} EGP/night</span>
            <span class="rating" *ngIf="listing.averageRating">
              ‚≠ê {{ listing.averageRating.toFixed(1) }}
            </span>
            <span class="no-rating" *ngIf="!listing.averageRating">
              No reviews
            </span>
          </div>

          <div class="status" [class.approved]="listing.isApproved" [class.pending]="!listing.isApproved">
            {{ listing.isApproved ? '‚úì Approved' : '‚è≥ Pending' }}
          </div>

          <div class="card-actions">
            <button class="btn btn-sm btn-primary" (click)="editListing(listing.id); $event.stopPropagation()">
              Edit
            </button>
            <button class="btn btn-sm btn-danger" (click)="deleteListing(listing.id, $event)">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="totalPages > 1" class="pagination">
      <button 
        class="btn-page" 
        (click)="goToPage(currentPage - 1)"
        [disabled]="currentPage === 1"
      >
        ‚Üê Previous
      </button>

      <span class="page-info">
        Page {{ currentPage }} of {{ totalPages }}
      </span>

      <button 
        class="btn-page" 
        (click)="goToPage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
      >
        Next ‚Üí
      </button>
    </div>
  </div>
</div>
