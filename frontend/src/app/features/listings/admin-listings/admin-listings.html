<div class="admin-listings-container">
  <div class="header">
    <h2>Manage Listings</h2>
  </div>

  <!-- Filters -->
  <div class="filters">
    <button 
      class="filter-btn"
      [class.active]="filterStatus === 'all'"
      (click)="setFilter('all')"
    >
      All Listings
    </button>
    <button 
      class="filter-btn"
      [class.active]="filterStatus === 'approved'"
      (click)="setFilter('approved')"
    >
      ✓ Approved
    </button>
    <button 
      class="filter-btn"
      [class.active]="filterStatus === 'pending'"
      (click)="setFilter('pending')"
    >
      ⏳ Pending Review
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Loading listings...</p>
  </div>

  <div *ngIf="error && !loading" class="alert alert-error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && listings.length > 0">
    <div class="listings-table">
      <div class="table-header">
        <div class="col-title">Title</div>
        <div class="col-location">Location</div>
        <div class="col-price">Price</div>
        <div class="col-status">Status</div>
        <div class="col-actions">Actions</div>
      </div>

      <div *ngFor="let listing of listings" class="table-row">
        <div class="col-title">
          <div class="title-info">
            <img 
              [src]="listing.mainImageUrl || 'https://via.placeholder.com/50x50'" 
              [alt]="listing.title"
              class="thumbnail"
            />
            <h4>{{ listing.title }}</h4>
          </div>
        </div>
        
        <div class="col-location">{{ listing.location }}</div>
        
        <div class="col-price">{{ listing.pricePerNight }} EGP</div>
        
        <div class="col-status">
          <span class="status-badge" [class.approved]="listing.isApproved" [class.pending]="!listing.isApproved">
            {{ listing.isApproved ? '✓ Approved' : '⏳ Pending' }}
          </span>
        </div>
        
        <div class="col-actions">
          <button 
            *ngIf="!listing.isApproved"
            class="btn btn-sm btn-success"
            (click)="approveListing(listing.id, $event)"
            title="Approve"
          >
            Approve
          </button>
          <button 
            *ngIf="!listing.isApproved"
            class="btn btn-sm btn-danger"
            (click)="rejectListing(listing.id, $event)"
            title="Reject"
          >
            Reject
          </button>
          <a 
            [routerLink]="['/listings', listing.id, 'detail']"
            class="btn btn-sm btn-primary"
            title="View"
          >
            View
          </a>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="totalPages > 1" class="pagination">
      <button 
        class="btn-page" 
        (click)="goToPage(currentPage - 1)"
        [disabled]="currentPage === 1"
      >
        ← Previous
      </button>

      <span class="page-info">
        Page {{ currentPage }} of {{ totalPages }}
      </span>

      <button 
        class="btn-page" 
        (click)="goToPage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
      >
        Next →
      </button>
    </div>
  </div>

  <div *ngIf="!loading && !error && listings.length === 0" class="empty-state">
    <p>No listings found.</p>
  </div>
</div>
