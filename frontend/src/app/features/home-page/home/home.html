<div class="broker-homepage">
    <!-- Hero Section with Broker Character -->
    <section class="broker-hero">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 hero-content">
                    <div class="hero-text">
                        <h1 class="hero-title" [attr.dir]="currentLang">
                            <span class="title-main">{{ 'home.welcomeTo' | translate }}</span>
                            <span class="title-broker" [class.primary-title]="currentLang === 'en'" [class.secondary-title]="currentLang === 'ar'">The Broker</span>
                            <span class="title-ar" [class.primary-title]="currentLang === 'ar'" [class.secondary-title]="currentLang === 'en'">السمسارة</span>
                        </h1>
                        <p class="hero-subtitle">
                            {{ 'home.discoverEgypt' | translate }}
                        </p>
                        <div class="hero-actions">
                            <a class="btn-broker" routerLink="/listings">
                                {{ 'home.exploreListing' | translate }}
                                <i class="bi bi-arrow-right ms-2"></i>
                            </a>
                            <a class="btn-broker-outline" (click)="checkHaveListing()">
                                {{ 'home.listProperty' | translate }}
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 hero-image">
                    <div class="broker-character-container">
                        <img src="/3.png" alt="The Broker Character" class="broker-character-main">
                        <div class="character-accent-circle"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section class="broker-search">
        <div class="container">
            <div class="search-card broker-card">
                <app-stacked-cards></app-stacked-cards>
            </div>
        </div>
    </section>

    <!-- Featured Listings - Top Priority -->
    <section class="broker-listings">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="red-accent">{{ 'home.TopPriorityListings' | translate }}</span>
                    <i class="bi bi-arrow-right-short"></i>
                </h2>
                <a routerLink="/listings" class="view-all-link">
                    {{ 'common.viewAll' | translate }}
                    <i class="bi bi-arrow-right"></i>
                </a>
            </div>

            <div *ngIf="loading" class="text-center my-5">
                <p class="text-muted">Loading featured listings...</p>
            </div>

            <div *ngIf="error" class="alert alert-danger my-3">
                {{ error }}
            </div>

            <div class="cards-list" *ngIf="!loading && !error">
                <app-home-listing-card
                  *ngFor="let listing of topPriorityListings"
                  [listing]="listing">
                </app-home-listing-card>
            </div>
        </div>
    </section>

    <!-- Villas Section -->
    <section class="broker-listings bg-light-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="red-accent">{{ 'home.villas' | translate }}</span>
                    <i class="bi bi-arrow-right-short"></i>
                </h2>
                <a routerLink="/listings" class="view-all-link">
                    {{ 'common.viewAll' | translate }}
                    <i class="bi bi-arrow-right"></i>
                </a>
            </div>

            <div class="cards-list" *ngIf="!loading && !error">
                <app-home-listing-card
                  *ngFor="let listing of villaListings"
                  [listing]="listing">
                </app-home-listing-card>
            </div>
        </div>
    </section>

    <!-- Popular in Cairo Section -->
    <section class="broker-listings">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="red-accent">{{ 'home.popularInCairo' | translate }}</span>
                    <i class="bi bi-arrow-right-short"></i>
                </h2>
                <a routerLink="/listings" class="view-all-link">
                    {{ 'common.viewAll' | translate }}
                    <i class="bi bi-arrow-right"></i>
                </a>
            </div>

            <div class="cards-list" *ngIf="!loading && !error">
                <app-home-listing-card
                  *ngFor="let listing of cairoListings"
                  [listing]="listing">
                </app-home-listing-card>
            </div>
        </div>
    </section>
</div>
