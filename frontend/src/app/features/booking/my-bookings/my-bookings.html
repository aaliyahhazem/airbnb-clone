<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4 mybookings-header">
    <h2 class="mb-0">
      <i class="bi bi-journal-bookmark-fill text-primary me-2"></i>
      My Bookings
    </h2>

    <button 
      class="btn btn-outline-primary"
      (click)="loadMyBookings()"
      [disabled]="isLoading()">
      <i class="bi bi-arrow-clockwise"></i> Refresh
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading()" class="text-center py-5">
    <div class="spinner-border text-primary"></div>
    <p class="mt-3 text-muted">Loading your bookings...</p>
  </div>

  <!-- Error -->
  <div *ngIf="errorMessage() && !isLoading()" class="alert alert-danger">
    {{ errorMessage() }}
  </div>

  <!-- Empty State -->
  <div 
    *ngIf="!isLoading() && !errorMessage() && bookings().length === 0"
    class="text-center py-5">

    <i class="bi bi-calendar-x empty-icon"></i>
    <h4 class="mt-3">No bookings yet</h4>
    <p class="text-muted">Start exploring and make your first booking!</p>

    <a routerLink="/listings" class="btn btn-primary btn-lg">Browse Listings</a>
  </div>

  <!-- Booking Cards -->
  <div *ngIf="!isLoading() && bookings().length > 0" class="row">
    <div *ngFor="let booking of bookings()" class="col-md-6 mb-4">
      <div class="card h-100">

        <!-- Header -->
        <div class="card-header d-flex justify-content-between align-items-center">
          <span 
            class="badge"
            [ngClass]="getStatusBadgeClass(booking.bookingStatus)">
            {{ booking.bookingStatus }}
          </span>

          <span class="badge bg-info">
            {{ booking.paymentStatus }}
          </span>
        </div>

        <!-- Body -->
        <div class="card-body">
          <h5 class="card-title mb-3">
            Booking #{{ booking.id }}
          </h5>

          <p class="mb-2">
            <strong>Dates:</strong><br>
            {{ booking.checkInDate | date:'mediumDate' }}
            -
            {{ booking.checkOutDate | date:'mediumDate' }}
          </p>

          <p class="mb-2">
            <strong>Total Price:</strong>
            EGP {{ booking.totalPrice }}
          </p>

          <p class="mb-0">
            <strong>Listing:</strong>
            {{ booking.listingId }}
          </p>
        </div>

        <!-- Footer -->
        <div class="card-footer bg-white">
          <div class="d-flex gap-2">
            <button 
              class="btn btn-outline-danger btn-sm"
              (click)="cancelBooking(booking.id)"
              [disabled]="booking.bookingStatus === 'cancelled'">
              Cancel
            </button>

            <button class="btn btn-outline-primary btn-sm">
              View Details
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>
