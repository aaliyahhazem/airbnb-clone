<div class="broker-favorites-container">

  <!-- Favorites Hero Section -->
  <div class="broker-favorites-hero">
    <div class="favorites-hero-content">
      <!-- Character Section -->
      <div class="broker-character-section">
        <div class="broker-character-container">
          <img src="/3.png" alt="The Broker Character" class="favorites-character" />
          <div class="favorites-accent-circle"></div>
        </div>
      </div>

      <!-- Header Content -->
      <div class="favorites-header-content">
        <h2 class="favorites-title">{{ 'favorites.myFavorites' | translate }}</h2>
        <p class="favorites-subtitle">{{ 'favorites.savedProperties' | translate }}</p>

        <!-- Favorites Stats -->
        <div class="favorites-stats">
          <div class="stat-item">
            <i class="bi bi-heart-fill"></i>
            <span>{{ listings.length }} {{ 'favorites.savedItems' | translate }}</span>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="favorites-actions">
          <button class="btn-broker-favorites" (click)="goToListings()">
            <i class="bi bi-search"></i>
            {{ 'favorites.browseListings' | translate }}
          </button>
          <button
            class="btn-broker-clear"
            *ngIf="listings.length > 0"
            (click)="clearAll()">
            <i class="bi bi-trash"></i>
            {{ 'favorites.clearAll' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
<div class="favorites-container">
  <!-- Header -->
  

  <!-- Loading State -->
  <div *ngIf="loading" class="broker-loading-section">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h3>{{ 'favorites.loadingFavorites' | translate }}</h3>
      <p>{{ 'favorites.gatheringProperties' | translate }}</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="broker-error-section">
    <div class="error-content">
      <i class="bi bi-exclamation-triangle"></i>
      <h3>{{ 'favorites.errorOccurred' | translate }}</h3>
      <p>{{ error }}</p>
      <button class="btn-broker" (click)="ngOnInit()">
        <i class="bi bi-arrow-clockwise"></i>
        {{ 'favorites.tryAgain' | translate }}
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && listings.length === 0" class="broker-empty-favorites">
    <div class="empty-content">
      <div class="empty-icon">
        <i class="bi bi-heart"></i>
      </div>
      <h3>{{ 'favorites.noFavorites' | translate }}</h3>
      <p>{{ 'favorites.startExploring' | translate }}</p>
      <button class="btn-broker" (click)="goToListings()">
        <i class="bi bi-search"></i>
        {{ 'favorites.browseListings' | translate }}
      </button>
    </div>
  </div>



  <!-- Favorites Grid using Listing Cards -->
  <div *ngIf="!loading && !error && listings.length > 0" class="favorites-grid">
    <div *ngFor="let listing of listings; trackBy: trackByListingId" class="listing-card-wrapper">
        <app-listing-card
          [listing]="listing"
          [isFavorited]="true"
          (favoriteChanged)="onFavoriteChanged($event.listingId ?? listing.id, $event.isFavorited ?? true)">
        </app-listing-card>
        
        <!-- Remove Button Overlay -->
        <button 
          class="remove-favorite-btn" 
          (click)="removeFavorite(listing.id, $event)"
          [title]="'favorites.removeFromFavorites' | translate"
          aria-label="Remove from favorites">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
  </div>

</div>
